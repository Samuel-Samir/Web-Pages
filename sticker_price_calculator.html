<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Sticker Price Calculator</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    body{
      font-family: Arial, sans-serif;
      background:#f9f9f9; margin:0; padding:40px;
    }
    .container{
      max-width:500px; margin:auto; background:#fff; padding:25px;
      border-radius:10px; box-shadow:0 0 10px rgba(0,0,0,0.1);
    }
    h2{ text-align:center; margin:0 0 10px; }
    label{ display:block; margin-top:15px; font-weight:bold; }
    input{
      width:100%; padding:8px; margin-top:5px;
      border:1px solid #ccc; border-radius:5px;
    }
    button{
      margin-top:20px; width:100%; padding:10px; font-size:16px;
      background:#28a745; color:#fff; border:0; border-radius:5px; cursor:pointer;
    }
    button:hover{ background:#218838; }
    .result{ margin-top:20px; background:#f1f1f1; padding:15px; border-radius:5px; }
    .result p{ margin:6px 0; }
    hr{ border:0; border-top:1px solid #ddd; margin:12px 0; }
  </style>
</head>
<body>
  <div class="container">
    <h2>Sticker Price Calculator</h2>

    <label for="stickerWidth">Sticker Width (cm)</label>
    <input id="stickerWidth" type="number" step="any" placeholder="Enter width" />

    <label for="stickerHeight">Sticker Height (cm)</label>
    <input id="stickerHeight" type="number" step="any" placeholder="Enter height" />

    <label for="stickerQuantity">Quantity</label>
    <input id="stickerQuantity" type="number" step="1" placeholder="Enter quantity" />

    <button onclick="calculate()">Calculate</button>

    <div id="result" class="result"></div>
  </div>

  <script>
    // ===========================================
    // üì¶ Static Data (predefined sticker prices)
    // ===========================================
    const staticData = [
      { price: 40,  quantity: 300, size: 1, code: 54263 },
      { price: 60,  quantity: 500, size: 1, code: 54264 },
      { price: 40,  quantity: 300, size: 2, code: 54265 },
      { price: 60,  quantity: 500, size: 2, code: 54266 },
      { price: 40,  quantity: 100, size: 3, code: 54267 },
      { price: 60,  quantity: 200, size: 3, code: 54268 },
      { price: 90,  quantity: 300, size: 3, code: 54269 },
      { price: 100, quantity: 500, size: 3, code: 54270 },
      { price: 60,  quantity: 100, size: 4, code: 54271 },
      { price: 80,  quantity: 200, size: 4, code: 54272 },
      { price: 120, quantity: 300, size: 4, code: 54273 },
      { price: 70,  quantity: 100, size: 5, code: 54274 },
      { price: 120, quantity: 200, size: 5, code: 54275 },
      { price: 70,  quantity: 100, size: 6, code: 54277 },
      { price: 140, quantity: 200, size: 6, code: 54277 }
    ];

    // ===========================================
    // üìè Stickers-per-meter reference table
    // ===========================================
    const stickersPerMeter = {
      1:62,2:36,3:25,4:18,5:14,6:12,7:11,8:9,9:8,10:7,11:7,12:6,13:6,14:5,15:5,
      16:5,17:5,18:4,19:4,20:4,21:4,22:3,23:3,24:3,25:3,26:3,27:3,28:3,29:3,30:2
    };

    // ===========================================
    // üí∞ Determine price per meter and code
    // ===========================================
    function getMeterPricing(metersRequired){
      if (metersRequired <= 5)  return { pricePerMeter: 120, code: 54314 };
      if (metersRequired <= 10) return { pricePerMeter: 90,  code: 54315 };
      return { pricePerMeter: 70, code: 54316 };
    }

    // Utility to round numbers to 1 decimal
    function roundToOneDecimal(num){ return Math.round(num * 10) / 10; }

    // ===========================================
    // üßÆ Main Calculation
    // ===========================================
    function calculate(){
      const stickerWidth = parseFloat(document.getElementById('stickerWidth').value);
      const stickerHeight = parseFloat(document.getElementById('stickerHeight').value);
      const stickerQuantity = parseInt(document.getElementById('stickerQuantity').value, 10);
      const resultDiv = document.getElementById('result');

      // Validation
      if (!stickerWidth || !stickerHeight || !stickerQuantity || stickerWidth <= 0 || stickerHeight <= 0 || stickerQuantity <= 0){
        resultDiv.innerHTML = "<p>Please enter valid positive numbers.</p>";
        return;
      }

      // ===========================================
      // Step 1Ô∏è‚É£ ‚Äî Try Static Data Lookup
      // ===========================================
      const largestDimension = Math.max(stickerWidth, stickerHeight);
      const largestInt = Number.isInteger(largestDimension) ? largestDimension : null;
      let matchedStaticRecord = null;
      if (largestInt !== null){
        matchedStaticRecord = staticData.find(record => record.size === largestInt && record.quantity === stickerQuantity);
      }

      if (matchedStaticRecord){
        resultDiv.innerHTML = `
          <p><b>Price:</b> ${matchedStaticRecord.price}</p>
          <p><b>Code:</b> ${matchedStaticRecord.code}</p>
          <hr>
          <p><b>Stickers per meter (Width):</b> No data available for now</p>
          <p><b>Stickers per meter (Height):</b> No data available for now</p>
          <p><b>Total stickers per meter:</b> No data available for now</p>
          <p><b>Meters required:</b> No data available for now</p>
          <p><b>Price per meter:</b> No data available for now</p>
          <p><b>Final price:</b> No data available for now</p>
          <hr>
          <p><b>Result Type:</b> Static Data</p>
        `;
        return;
      }

      // ===========================================
      // Step 2Ô∏è‚É£ ‚Äî Fallback: Calculate by Meter
      // ===========================================
      const widthKey = Number.isInteger(stickerWidth) ? stickerWidth : null;
      const heightKey = Number.isInteger(stickerHeight) ? stickerHeight : null;

      if (widthKey === null || heightKey === null || stickersPerMeter[widthKey] === undefined || stickersPerMeter[heightKey] === undefined){
        resultDiv.innerHTML = "<p>No per-meter lookup value found for this width or height. Please use integer sizes from 1 to 30.</p>";
        return;
      }

      const stickersPerMeterWidth = stickersPerMeter[widthKey];
      const stickersPerMeterHeight = stickersPerMeter[heightKey];
      const totalStickersPerMeter = stickersPerMeterWidth * stickersPerMeterHeight;
      const metersRequired = stickerQuantity / totalStickersPerMeter;

      const { pricePerMeter, code } = getMeterPricing(metersRequired);
      const roundedMeters = roundToOneDecimal(metersRequired);
      const totalPrice = roundToOneDecimal(metersRequired * pricePerMeter);

      // Display results
      resultDiv.innerHTML = `
        <p><b>Stickers per meter (Width):</b> ${stickersPerMeterWidth}</p>
        <p><b>Stickers per meter (Height):</b> ${stickersPerMeterHeight}</p>
        <p><b>Total stickers per meter:</b> ${totalStickersPerMeter}</p>
        <p><b>Meters required:</b> ${roundedMeters}</p>
        <p><b>Price per meter:</b> ${pricePerMeter}</p>
        <p><b>Final price:</b> ${totalPrice}</p>
        <hr>
        <p><b>Code:</b> ${code}</p>
        <p><b>Result Type:</b> Calculated by Meter</p>
      `;

      // Step 3Ô∏è‚É£ ‚Äî Add red warning if meters < 1
      if (metersRequired < 0.5) {
        const warning = document.createElement("div");
        warning.style.backgroundColor = "#f8d7da";
        warning.style.color = "#721c24";
        warning.style.padding = "10px";
        warning.style.marginTop = "10px";
        warning.style.borderRadius = "5px";
        warning.style.border = "1px solid #f5c6cb";
        warning.innerHTML = "‚ö†Ô∏è Minimum printable length is 0.5 meter ‚Äî adjusted to 0.5 meter for pricing.";
        resultDiv.appendChild(warning);
      }
    }

    // ===========================================
    // üìò FLOW SUMMARY (for documentation)
    // ===========================================
    // 1Ô∏è‚É£ Validate user input (width, height, quantity).
    // 2Ô∏è‚É£ Check staticData for an exact match ‚Üí if found, display predefined price/code.
    // 3Ô∏è‚É£ If no static match, lookup stickersPerMeter for both width & height.
    // 4Ô∏è‚É£ Calculate:
    //     - totalStickersPerMeter = widthValue √ó heightValue
    //     - metersRequired = quantity √∑ totalStickersPerMeter
    // 5Ô∏è‚É£ Determine price per meter and code based on metersRequired:
    //     ‚â§5 ‚Üí 120 (54314), ‚â§10 ‚Üí 90 (54315), >10 ‚Üí 70 (54316)
    // 6Ô∏è‚É£ Show final computed details (rounded).
    // 7Ô∏è‚É£ If metersRequired < 1 ‚Üí show red warning box about minimum 1 meter.
  </script>
</body>
</html>

